# Перенос работ в Учет времени из 1С-Коннект

Создание записей в документе "Учет времени" на основе подключений по удаленному доступу из 1С-Коннект.

## Как работать

Если у вас не настроена синхронизация с 1С-Коннект, то узнать, как настроить, можно [здесь](https://sorokinltd.github.io/franchisee-manag-doc.github.io/docs/one-c-connect)

* `УФФ С&К -> 1С-Коннект -> Импорт из 1С-Коннект`
* Выберите получаемый период. **Внимание: При вызове операции в дневное время максимальное значение запрашиваемого периода не может превышать 60 календарных дней. Это особенность 1С-Коннект**
* Укажите номенклатуру, которая будет подставляться к создаваемым записям. Обычно это может быть услуга: например, оказание услуг по сопровождению.
* Нажмите на "Получить данные". Таблица заполнится списком подключений к клиентам за выбранный период.

![Импорт работ из 1С-Коннект](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/import-from-connect.png)

Если комментарий к подключению не был указан в 1С-Коннект, его можно указать в списке.
Если в комментарии первым символом указать `+`, то такая работа считается оплачиваемой, и она попадет в документ `Расходная накладная` или `Заказ покупателя`.

Жирным шрифтом выделелены клиенты, у которых есть абонентский договор.

* Нажмите на `Создать документы`. Создатся документ, в который внесутся работы из списка. Если в указанном периоде будет найден существующий документ, система предложит добавить данные в существующий документ.

![Созданные документы УВ](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/work-time-document.png)

Проведем документ.

Перейдем в отчет Учет рабочего времени:

![Отчет по работам](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/work-time-report.png)

Время работ округлилось по заданной тарификации в настройках системы. 
Сумма посчиталась по установленным ценам. Для первых двух клиентов договор не определился, и для них цена подставилась по умолчанию.
Для третьего уже взялась цена из пакета часов, который указан в тарифе.

Подробнее об устройстве отчета Учет рабочего времени можно прочитать [здесь](https://sorokinltd.github.io/franchisee-manag-doc.github.io/docs/work-time).

Подробнее об ценах в договорах можно прочитать [здесь](https://sorokinltd.github.io/franchisee-manag-doc.github.io/docs/contracts#%D0%BA%D0%B0%D0%BA-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C-%D1%86%D0%B5%D0%BD%D1%83-%D0%B4%D0%BE%D0%B3%D0%BE%D0%B2%D0%BE%D1%80%D0%B0).

## Пример работы

* Предположим, что к нам обратился клиент. Для того, чтобы работать с ним, заключим с ним договор. 
Пусть в нашем случае это будет договор с категорией `Часы`. Для этого добавим договор в систему. 

* Для начала создадим тариф, привязанный к категории `Часы`:

![Тариф Часы](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/example-tarif.png)

В нем мы добавили пакет часов для того, чтобы устанавливалась цена.

* Установим цену пакета `Базовый`. Перейдем в `Настройки подсистемы -> Пакеты часов`.

![Установка цен пакета](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-price-package.png)

Сохраним цену.

* Установим тарификацию, чтобы у нас округлялось время по 15 минут. Перейдем в `Настройки подсистемы -> Тарификация`.

![Установка тарификации](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-tarification.png)

Сохраним тарификацию.

Таким образом, договор будет иметь примерно такой вид:

![Пример карточки договора](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-contract.png)

* Предположим, специалист поработал с клиентом в 1С-Коннект и загрузил работы в УНФ: 

![Загрузка работ](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-import-from-connect.png)

Мы заполнили поле `Номенклатура` в шапке для того, чтобы эта услуга заполнилась в списке работ. При необходимости в строках можно поменять номенклатуру.

* Нажмем на `Создать документы`, если у нас уже есть документ на этой неделе, добавим работы в существующий документ. Если еще не было документов, то пусть создастся новый документ.

* Проверим, как выглядит отчет `Учет рабочего времени`

![Пример отчета](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-work-time-report.png)

В отчете подставился наш созданный ранее договор.
Время округлилось по тарификации 15 минут. А цена подставилась из пакета `Базовый`, который мы создали ранее.

Для того, чтобы выставить счет за эти работы, нужно чтобы в комментарии к работе стоял `+`. Заполним комментарий и посмотрим, что изменилось в отчете:

![Пример отчета](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/paid-work-time.png)

Заполнилась колонка `Часы к оплате` и `Сумма к оплате`. Эти работы и выставятся на оплату.
Создадим расходную накладную на основе этих работ. В данном случае нас интересует только этот контрагент, поэтому поставим в отчете по нему отбор, заполним дату создания документов, и нажмем на кнопку `Создать расходные накладные`:

![Создание документа](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-create-doc.png)

Получаем такой документ:

![Создание документа](https://sorokinltd.github.io/franchisee-manag-doc.github.io/img/ex-doc-from-report.png)

Проведем документ.
